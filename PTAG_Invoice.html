<?xml version="1.0"?>
<!DOCTYPE pdf PUBLIC "-//big.faceless.org//report" "report-1.1.dtd">
<pdf>
	<head>
		<link name="NotoSans" type="font" subtype="truetype" src="${nsfont.NotoSans_Regular}" src-bold="${nsfont.NotoSans_Bold}" src-italic="${nsfont.NotoSans_Italic}" src-bolditalic="${nsfont.NotoSans_BoldItalic}" bytes="2" />
		<#if .locale == "zh_CN">
		<link name="NotoSansCJKsc" type="font" subtype="opentype" src="${nsfont.NotoSansCJKsc_Regular}" src-bold="${nsfont.NotoSansCJKsc_Bold}" bytes="2" />
		<#elseif .locale == "zh_TW">
		<link name="NotoSansCJKtc" type="font" subtype="opentype" src="${nsfont.NotoSansCJKtc_Regular}" src-bold="${nsfont.NotoSansCJKtc_Bold}" bytes="2" />
		<#elseif .locale == "ja_JP">
		<link name="NotoSansCJKjp" type="font" subtype="opentype" src="${nsfont.NotoSansCJKjp_Regular}" src-bold="${nsfont.NotoSansCJKjp_Bold}" bytes="2" />
		<#elseif .locale == "ko_KR">
		<link name="NotoSansCJKkr" type="font" subtype="opentype" src="${nsfont.NotoSansCJKkr_Regular}" src-bold="${nsfont.NotoSansCJKkr_Bold}" bytes="2" />
		<#elseif .locale == "th_TH">
		<link name="NotoSansThai" type="font" subtype="opentype" src="${nsfont.NotoSansThai_Regular}" src-bold="${nsfont.NotoSansThai_Bold}" bytes="2" />
		</#if>
		<!-- 2) Translation Collection -->
		<#assign tc = nstranslation.load({
		"collections":[{
		"alias":"default",
		"collection":"custcollection_chargespdf",
		"keys":[
		"CHARGES_TAX_AMT","CHARGES_AMT_DUE",
		"CHARGES_TYPE","CHARGES_DATE","CHARGES_EMP",
		"CHARGES_DESC","CHARGES_QTY","CHARGES_RATE","CHARGES_AMT"
		],
		"locale":.locale
		}]
		})>  
		<macrolist>
			<macro id="nlheader">
				<table class="header">
					<tr>
						<td align="left"><#if companyInformation.logoUrl?has_content> <@filecabinet nstype="image" style="width: 130px; height: 45px;" src="${subsidiary.logo@url}" /> </#if></td>
					</tr>
				</table>
				4
			</macro>
			<macro id="nlfooter">
				<#assign rawFooter = record.subsidiary.custrecord_atlas_svcs_mm_doc_footer!''> <#if rawFooter?length &gt; 260> <#assign footerText = rawFooter?substring(0,260)> <#else> <#assign footerText = rawFooter> </#if>
				<table class="footer" align="right">
					<tr>
						<td style="height: 57px;">${footerText!''}</td>
						<td style="height: 57px;">${subsidiary.custrecord_atlas_svcs_mm_bankdetails!''}</td>
					</tr>
				</table>
			</macro>
		</macrolist>

        <!-- CSS Table Styling-->
        <style type="text/css">
			table { font-family: sans-serif; font-size:9pt; width:100%; table-layout:fixed; margin-top:10px; }
			th    { background:#b8b7b7; color:#000000; font-weight:bold; padding:5px 8px 3px; font-size:10pt; }
			td    { padding:4px 6px; }
			table.header    { border-bottom:4px black; }
			table.footer    { border-collapse:collapse; }
			table.itemtable td { border:0.5px solid #e0e0e0; }
			tr.totalrow     { color:#2B547E; background:#fff; line-height:200%; }
			hr              { width:100%; height:1px; background:#d3d3d3; border:none; }
			span.title      { font-size:14pt; }
			span.number     { font-size:16pt; color:#00467F; }
			span.total      { font-size:10pt; }
		</style>
	</head>
                  
	<!-- Body Starts from Here -->
	<body header="nlheader" header-height="8%" footer="nlfooter" footer-height="65pt" padding="0.5in 0.5in 0.5in 0.5in" size="Letter">
		
      <!-- Outer 2-column layout, 12-unit grid -->
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<!-- LEFT CELL: Company -->
				<td colspan="6" valign="top">
					<!-- Company info -->
					<table width="100%" border="0">
						<tr>
							<td class="addressheader">${companyInformation.companyName}</td>
						</tr>
						<tr>
							<td class="address">${subsidiary.mainaddress_text}</td>
						</tr>
					</table>

					<!-- Phone Number -->
                    <table>
                     <tr>
                      <td>Phone Number</td>
                      <td></td>
                    </tr>
                    </table>
					
                    <!-- Bill To -->
					<table class="itemtable" width="100%" border="1" style="margin-top:10px;">
						<tr>
							<td class="addressheader">Bill To</td>
						</tr>
						<tr>
							<td class="address">${record.billaddress}</td>
						</tr>
					</table>
                    
                    <!-- PO # -->
                    <table class="itemtable" width="100%" border="1" style="margin-top:10px;">
                        <thead>
                            <tr>
                                <th>PO #</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>${record.otherrefnum}</td>
                            </tr>
                        </tbody>
                    </table>
				</td>
				<!-- RIGHT CELL: Invoice / PO / Terms stack -->
				<td colspan="6" valign="top">
					<!-- Invoice header -->
					<table class="itemtable" width="100%" border="1">
						<thead>
							<tr>
								<th>Date</th>
								<th>Invoice #</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>${record.trandate}</td>
								<td>${record.tranid}</td>
							</tr>
						</tbody>
					</table>
					<!-- Terms -->
					<table class="itemtable" width="100%" border="1" style="margin-top:10px;">
						<thead>
							<tr>
								<th>Terms</th>
								<th>Due Date</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>${record.terms}</td>
								<td>${record.duedate}</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
		</table>
		<!-- LINE ITEMS --> <#if record.item?has_content> <#assign hasTax1=false><#assign hasTax2=false> <#list record.item as it> <#if it.taxrate1?has_content><#assign hasTax1=true></#if> <#if it.taxrate?has_content ><#assign hasTax2=true></#if> </#list>
		<table class="itemtable" width="100%">
			<thead>
				<tr>
					<th style="text-align: left;" colspan="8">${record.item[0].item@label}</th>
					<th colspan="9">${record.item[0].description@label}</th>
					<th style="text-align: right;" colspan="4">${record.item[0].quantity@label}</th>
					<#if hasTax1>
					<th colspan="3">${record.item[0].taxrate1@label}</th>
					<#elseif hasTax2>
					<th colspan="3">${record.item[0].taxrate@label}</th>
					</#if>
					<th style="text-align: right;" colspan="6">${record.item[0].rate@label}</th>
					<th style="text-align: right;" colspan="7">${record.item[0].amount@label}</th>
				</tr>
			</thead>
			<#list record.item as it>
			<tr style="background-color: ${ (it_index % 2 == 0)?string('#ffffff','#f0f0f0') };">
				<td colspan="8"><span style="color: #666;">${it.item}</span></td>
				<td colspan="9"><span style="color: #666;">${it.description}</span></td>
				<td style="text-align: right;" colspan="4"><span style="color: #666;">${it.quantity}</span></td>
				<#if hasTax1>
				<td colspan="3"><span style="color: #666;">${it.taxrate1}</span></td>
				<#elseif hasTax2>
				<td colspan="3"><span style="color: #666;">${it.taxrate}</span></td>
				</#if>
				<td style="text-align: right;" colspan="6"><span style="color: #666;">${it.rate}</span></td>
				<td style="text-align: right;" colspan="7"><span style="color: #666;">${it.amount}</span></td>
			</tr>
			</#list>
		</table>
		</#if> <!-- SUBTOTAL / TAX / SHIPPING -->
		<table class="itemtable" border="0" width="100%">
			<tr>
				<td colspan="24">&nbsp;</td>
				<td style="text-align: right;" colspan="6"><strong>${record.subtotal@label}</strong></td>
				<td style="text-align: right;" colspan="7"><strong>${record.subtotal}</strong></td>
			</tr>
			<tr>
				<td colspan="24">&nbsp;</td>
				<td style="text-align: right;" colspan="6"><strong>${tc.default.CHARGES_TAX_AMT}</strong></td>
				<td style="text-align: right;" colspan="7"><strong>${record.taxtotal}</strong></td>
			</tr>
		</table>
		<hr />
		<!-- GRAND TOTAL / AMOUNT DUE -->
		<table width="100%">
			<tr>
				<td colspan="24">&nbsp;</td>
				<td style="text-align: right;" colspan="6"><strong><span class="total">${record.total@label}</span></strong></td>
				<td style="text-align: right;" colspan="7"><strong><span class="total">${record.total}</span></strong></td>
			</tr>
			<tr>
				<td colspan="24">&nbsp;</td>
				<td style="text-align: right;" colspan="6"><strong>${tc.default.CHARGES_AMT_DUE}</strong></td>
				<td style="text-align: right;" colspan="7"><strong>${record.amountremaining}</strong></td>
			</tr>
		</table>
	</body>
</pdf>